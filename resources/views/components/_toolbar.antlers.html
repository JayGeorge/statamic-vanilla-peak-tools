{{#
    @name Peak toolbar
    @desc The Peak toolbar component displaying debug information.
#}}

<!-- statamic-vanilla-peak-tools::components/_toolbar.antlers.html -->
{{ if environment == 'local' }}
    {{ nocache }}
    <style>
        .peak-toolbar {
            display: flex;
            position: fixed;
            right: 0.25rem;
            bottom: 0.25rem;
            z-index: 50;
            {{# border-left-width: 1px; #}}
            {{# border-color: #ffffff; #}}
            {{# border-style: solid; #}}
            {{# font-size: 0.75rem; #}}
            font-size: 1rem;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            opacity: 1;

            /* Extra */
            gap: 1px;
            background: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

            &:hover {
                opacity: 1;
            }

            svg {
                width: 1.25em;
                height: 1.25em;
                fill: currentColor;
            }

            button {
                display: flex;
                padding-inline: 0.5rem;
                justify-content: center;
                align-items: center;
                background-color: #E5E7EB;

                &:hover {
                    background-color: #D1D5DB;
                }
            }

            .peak-toolbar__trash {
                width: 1rem;
                height: 1rem;
                color: #92400E;
                stroke: currentColor;
            }
        }
        .peak-toolbar__current-breakpoint {
            display: flex;
            gap: 0.4rem;
            padding: 0.5rem 0.75rem;
            align-items: center;
            color: #92400E;
            background-color: #FDE68A;
            font-size: 0.85em;
            svg {
                width: 0.9rem;
                height: 0.9rem;
            }
        }
        .peak-toolbar__edit {
            display: flex;
            padding: 0.5rem;
            margin-left: 0.25rem;
            align-items: center;
            color: #1F2937;
            background-color: #E5E7EB;

            &:hover {
                background-color: #D1D5DB;
            }
        }
        .peak-toolbar--visible {
            opacity: 1;
        }
        .peak-toolbar--invisible {
            opacity: 0;
        }
        </style>
        <aside
            class="peak-toolbar"
            x-data="{ toolbarVisible: $persist(true).as('toolbarVisible') }"
            x-ref="toolbar"
            :class="{ 'peak-toolbar--visible': toolbarVisible, 'peak-toolbar--invisible': !toolbarVisible }"
            x-cloak
        >
            <span title="Current breakpoint" class="peak-toolbar__current-breakpoint">
                {{ svg:breakpoint alt="" aria-hidden="true" }}
                <div x-on:resize.window.debounce="windowWidth = window.innerWidth" x-data="{windowWidth: window.innerWidth}">
                    <div x-text="`${windowWidth}px`"></div>
                </div>
            </span>

            {{ if logged_in == true }}
                <a href="{{ edit_url }}" title="Edit entry in CP" aria-label="Edit entry in CP" target="_blank" class="peak-toolbar__edit">
                    {{ svg:edit alt="" aria-hidden="true" }}
                    <span>Edit</span>
                </a>
            {{ /if }}

            <button
                @click="toolbarVisible = !toolbarVisible"
                title="Toggle toolbar visibility" aria-label="Toggle toolbar visibility" class="peak-toolbar__toggle-visibility"
            >
                <div x-show="!toolbarVisible">
                    {{ svg:invisible class="peak-toolbar__visibility" alt="" aria-hidden="true" }}
                </div>
                <div x-show="toolbarVisible">
                    {{ svg:visible class="peak-toolbar__visibility" alt="" aria-hidden="true" }}
                </div>
            </button>

            <button
                @click="$refs.toolbar.remove()"
                title="Remove toolbar" aria-label="Remove toolbar" class="peak-toolbar__remove"
            >
                {{ svg:trash class="peak-toolbar__trash" alt="" aria-hidden="true" }}
            </button>
        </aside>
    {{ /nocache }}
{{ /if }}
<!-- End: statamic-vanilla-peak-tools::components/_toolbar.antlers.html -->